## 分布式文件系统发展史（内含动态图片）

原创 *2016-04-24* *EMC中文技术社区* [EMC易安信中国技术社区](https://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651770770&idx=1&sn=7f2d48d2ac41d6a1c1cb1143cb493edf&scene=21##)

分布式存储在大数据、云计算、虚拟化场景都有勇武之地，在大部分场景还至关重要。

对于一个IT从业人员，学习分布式存储相关基础知识必不可少。

今天给大家简要介绍*nix平台下分布式文件系统的发展历史。

 

**1、单机文件系统**

用于操作系统和应用程序的本地存储。

缺点：数据无法再服务器之间共享。

典型代表：Ext2、Ext3、Ex4、NTFS、FAT、FAT32、XFS、JFS...

IO模型：

[![img](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIXG7zZcDhKWib5UuZOib1FTfuoKysc4jeGMzfLWSSLSeJmOtuJyA0rSzbK9a2uwyXFcibSjEFshX8TuA/0?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1)]()

****

**2、网络文件系统（简称：NAS）**

基于现有以太网架构，实现不同服务器之间传统文件系统数据共享。

缺点：两台服务器不能同时访问修改，性能有限。

典型代表：NFS、CIFS

IO模型：

[![img](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIXG7zZcDhKWib5UuZOib1FTfugjMg3KcWua6V2x5ZfU4ZXS0XjQaWuFc1slqXH3QQmdyd5mtb7D0OoQ/0?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1)]()

**3、集群文件系统**

在共享存储基础上，通过集群锁，实现不同服务器能够共用一个传统文件系统。

缺点：性能一般，扩展性很有限（小于16台服务器）。

典型代表：GFS（Redhat）、GFS2（Redhat）、OCFS（Oracle）

IO模型：

[![img](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)]()

 

GFS、GFS2模型如下：

[![img](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)]()

默认上面三种文件系统模块都位于内核里面，NFS over Inifiband可以使用kernel bypass绕开内核。

 

**4、分布式文件系统**

在传统文件系统上，通过额外模块实现数据跨服务器分布，并且自身集成raid保护功能，可以保证多台服务器同时访问、修改同一个文件系统。性能优越，扩展性很好，成本低廉。

缺点：适用场景单一，部分类型存在单点故障风险。

典型代表：lustre（Oracle）、HDFS（ASF）、gluster（Redhat）

IO模型：

主要分两大类型：一种是元数据集中管理模型；另一种是元数据分散管理模型

lustre（Oracle）

[![img](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIXG7zZcDhKWib5UuZOib1FTfu351ktTpd7AZCc2PBBWibXpomlLpmhoWmP2992j17a5XYiatWDoeBr3sw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1)]()

 

**HDFS（ASF）**

[![img](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIXG7zZcDhKWib5UuZOib1FTfuW3iaPdvLslHA2U1VnOJQKtDOblia83icp9ia2vLP7FJWiaGouhricDBUW08Q/0?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1)]()

lustre和HDFS是元数据集中管理典型代表。实际数据分布存放在数据服务器上，元数据服务器负责IO请求调配，空间分配；非常适用于大文件存储。

元数据服务器可能成为系统扩展的瓶颈。

 

**gluster（Redhat）**

[![img](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIXG7zZcDhKWib5UuZOib1FTfu0bYH5XzEg5koyfD8LxLPK4U19D5oSPqYzOBedXYz1JiaKNurvrPx9kg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1)]()

gluster是元数据分散管理模型典型代表，元数据被分散放置到所有服务器上，不存在元数据单点故障。非常适用于小文件存储。