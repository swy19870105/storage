## 如何计算磁盘性能

原创 *2016-05-10* *EMC中文技术社区* [EMC易安信中国技术社区](https://mp.weixin.qq.com/s?__biz=MjM5NjY0NzAwMg==&mid=2651770873&idx=1&sn=8b29e82006e12a4427bac223d27abd57&scene=21##)

磁盘是主要的物理存储设备，机械硬盘的性能受其转速（RPM），寻道时间（Seek Time）以及旋转延迟（Rotational latency）的影响，本文将描述如何通过这些参数计算磁盘的性能。

 

**磁盘规格**

 

机械硬盘的性能指标有三个重要的参数：

- 寻道时间 – 在磁道之间移动磁头所花费的时间
- 旋转延迟 – 盘片将数据旋转至磁头下的时间
- 传输速率 – 磁盘的带宽

 

理解这些参数之间的关系有助于了解一块磁盘的性能，这些值在决定磁盘性能的两个基本度量的时候非常有用：吞吐量和响应时间

 

**寻道时间**

 

寻道时间以毫秒（ms）来计算，不同磁盘的寻道时间不同。平均寻道时间是经常使用的度量，对于一块15k rpm的3.5英寸SAS盘，其平均寻道时间是3.8ms。减少磁盘寻道所花费的时间能增强性能。i/o类型也会影响寻道时间，连续i/o拥有最少的寻道时间，因为读写头可以在盘片上连续操作，而随机i/o就相对有较长的寻道时间，因为磁头始终需要在不同的磁道间切换。

 

**延迟**

 

延迟以毫秒（ms）来计算，更高转速的磁盘其延迟更小。下表显示了不同转速的磁盘所对应的延迟：

[![img](http://mmbiz.qpic.cn/mmbiz/TztEwAzAQIX20VLVTRy0V5LLYQmsLxhQXK5gKcfOMIVyVmS8yeLREZJsyaccXLibAA7Y1dfxM2EicQ78Zf0pJF1g/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1)]()

 

**传输速率**

 

传输速率以MB/s来计算，它又可以进一步分为内部/外部速率。内部速率是指在盘片上读写数据的快慢，盘片外圈速率要高于盘片里圈，而且对于同样的线性距离，也拥有更多的扇区。比如对于一个使用连续带宽的应用，3.5-inch 15k rpm SAS磁盘可以提供50MB/s的内圈速率以及100MB/s的外圈速率。

外部传输速率是指磁盘的连线头到HBA或NIC的传输速率。厂商通常给出的都是突发速率，且假定是内部连接（DAS）。对于存储系统来说，比如VNX，同一个RAID组内的磁盘是共享后端此部分速率的，因此通常达不到厂商给出的突发速率。存储系统的总线架构，实际传输速率更多是由后端传输协议、仲裁时间以及后端端口容量来决定的。

 

**计算平均响应时间**

 

平均响应时间是指一个请求从排队开始一直到执行结束所花费的时间，计算公式为：响应时间 = （队列长度+1）*平均响应时间

比如，某块磁盘的平均响应时间为6ms，队列长度为6，那么响应时间 = 42ms = (6+1)*6 ms