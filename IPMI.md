# IPMI

智能平台管理接口 (Intelligent Platform Management Interface, IPMI) 是一种开放标准的硬件管理接口规格，定义了嵌入式管理子系统进行通信的特定方法。IPMI 信息通过基板管理控制器 (BMC)（位于 IPMI 规格的硬件组件上）进行交流。使用低级硬件智能管理而不使用操作系统进行管理，具有两个主要优点： 首先，此配置允许进行带外服务器管理；其次，操作系统不必负担传输系统状态数据的任务。

## 发展历史

1998年 Intel、DELL、HP 及 NEC 共同提出 IPMI 规格，可以透过网路远端控制温度、电压。

2001年 IPMI 从 1.0 版改版至 1.5 版，新增 PCI Management Bus 等功能。

2004年 Intel发表了 IPMI 2.0 的规格，能够向下相容 IPMI 1.0 及 1.5 的规格。新增了 Console Redirection，并可以通过 Port、Modem 以及 LAN 远端管理伺服器，并加强了安全、VLAN 和刀锋伺服器的支援性。

## 基本认识

IPMI 是智能型平台管理接口（Intelligent Platform Management Interface）的缩写，是管理基于 Intel 结构的企业系统中所使用的外围设备采用的一种工业标准，该标准由英特尔、惠普、NEC、美国戴尔电脑和 SuperMicro 等公司制定。用户可以利用 IPMI 监视服务器的物理健康特征，如温度、电压、风扇工作状态、电源状态等。而且更为重要的是 IPMI 是一个开放的免费标准，用户无需为使用该标准而支付额外的费用。

自 1998 年，IPMI 论坛创建了 IPMI 标准以来，其已经得到了 170 多家供应商的支持，这使得其逐渐成为了一个完整地包括服务器和其他系统（如存储设备、网络和通信设备）的硬件管理规范，目前该标准最新版本为 IPMI 2.0，该版本在原有基础上有了不少的改进，包括可以通过串口、Modem 以及 LAN 等远程环境管理服务器系统（包括远程开关机），以及在安全、VLAN 和刀片支持等方面的提高。

IPMI 针对大量监控、控制和自动回复服务器的作业，提供了智能型的管理方式。此标准适用于不同的服务器拓扑学，以及 Windows、Linux、 Solaris、Mac 或是混合型的操作系统。此外，由于 IPMI 可在不同的属性值下运作，即使服务器本身的运作不正常，或是由于任何原因而无法提供服务，IPMI 仍可正常运作。

## 工作原理

IPMI 的核心是一个专用芯片/控制器(叫做服务器处理器或基板管理控制器(BMC))，其并不依赖于服务器的处理器、BIOS 或操作系统来工作，可谓非常地独立，是一个单独在系统内运行的无代理管理子系统，只要有 BMC 与 IPMI 固件其便可开始工作，而 BMC 通常是一个安装在服务器主板上的独立的板卡，现在也有服务器主板提供对 IPMI 支持的。IPMI 良好的自治特性便克服了以往基于操作系统的管理方式所受的限制，例如操作系统不响应或未加载的情况下其仍然可以进行开关机、信息提取等操作。

在工作时，所有的 IPMI 功能都是向 BMC 发送命令来完成的，命令使用 IPMI 规范中规定的指令，BMC 接收并在系统事件日志中记录事件消息，维护描述系统中传感器情况的传感器数据记录。在需要远程访问系统时，IPMI 新的 LAN 上串行(SOL)特性很有用。SOL 改变 IPMI 会话过程中本地串口传送方向，从而提供对紧急管理服务、Windows 专用管理控制台或 Linux 串行控制台的远程访问。BMC 通过在 LAN 上改变传送给串行端口的信息的方向来做到这点，提供了一种与厂商无关的远程查看启动、操作系统加载器或紧急管理控制台来诊断和维修故障的标准方式。

当需要对系统文本控制台进行远程访问时，Serial Over LAN (SOL) 功能将非常有用。SOL 通过 IPMI 会话重定向本地串行接口，允许远程访问Windows 的紧急事件管理控制台 (EMS) 特殊管理控制台 (SAC)，或访问 LINUX 串行控制台。这个过程的步骤是 IPMI 固件截取数据，然后通过局域网重新发送定向到串行端口的信息。 这就提供了远程查看 BOOT、OS 加载器或紧急事件管理控制台以诊断并修复服务器相关问题的标准方法，而无需考虑供应商。它允许在引导阶段配置各种组件。

而在命令传输的安全性方面，用户也无需担心，IPMI 增强的认证(基于安全哈希算法1和基于密钥哈希消息认证)和加密(高级加密标准和 Arcfour)功能有助于实现安全的远程操作。对VLAN的支持更是为设置管理专用网络提供了方便，并且可以以通道为基础进行配置。

一般来说，BMC 具有以下功能：

1. 通过系统的串行端口进行访问
2. 故障日志记录和 SNMP 警报发送
3. 访问系统事件日志 (System Event Log ,SEL) 和传感器状况
4. 控制包括开机和关机
5. 独立于系统电源或工作状态的支持
6. 用于系统设置、基于文本公用程序和操作系统控制台的文本控制台重定向

而通过 IPMI ，用户可以主动监测组件的状况，以确保不超出预置阈值，例如服务器温度。这样，通过避免不定期的断电，协助维护了 IT 资源的运行时间。 IPMI的预告故障能力也有助于 IT 周期的管理。通过检查系统事件日志 (SEL)，可以更轻松的预先判定故障组件。

## 采用厂商

Pigeon Point Systems 提供世界级的基于 AdvancedTCA (ATCA)、AdvancedMC 和 MicroTCA 架构的模块化平台管理组件；以及相关的咨询和设计服务。全球超过200家一流厂商(包括 Intel, Nokia)采用的是 PPS 的 IPMI 板级管理及机箱管理方案。
